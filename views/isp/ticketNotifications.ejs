<!-- all tickets notifications will be shown to respective ISP -->

<% include ../partials/header %>

<div class="main">
	<div id="color-code" class="text-right">
		<span class="bg-danger">0 - still  no reply</span>
		<span class="bg-warning">1 - isp replies</span>
		<span class="bg-success">2 - ticket closed</span>
	</div>
	<div class="table-responsive">
		<h4 class="text-center p-2">Tickets </h4>
			
  		<table class="table table-hover table-bordered">
  			<% let i=0; %>
  			<thead>
			
				<tr>
				    <th scope="col">#</th>
				    <th scope="col">Date</th>
				    <th scope="col">Package</th>
				    <th scope="col">Ticket ID</th>
				    <th scope="col">Department</th>
				    <th scope="col">Ticket Title</th>
				    <th scope="col">Ticket Description</th>
				    <th scope="col">Current Status</th>
				</tr>
			</thead>
			<tbody>
				<% ticketAll.forEach(function(ticket){%>
				<tr data-url="<%=baseURL%>/<%=ticket.package%>/<%=ticket.ticketId%>/replyTicket"
					<% if (ticket.ticketStatus==2)
						{%> class="clickable-row bg-success"
						<%} else if (ticket.ticketStatus==0)
						{%> class="clickable-row bg-danger"
						<% } else if (ticket.ticketStatus==1)
							{%>class="clickable-row bg-warning"
							<%}%>>
					<th scope="row"><%= ++i%></th>
					<td><%= ticket.ticketDate %></td>
					<td><%= ticket.package %></td>
					<td><%= ticket.ticketId %></td>
					<td><%= ticket.department %></td>
					<td><%= ticket.title %></td>
					<td><%= ticket.description %></td>
					<td><%= ticket.ticketStatus %></td>
				</tr>
			  	<% }) %>
			</tbody>
		</table>
	</div>

<% include ../partials/footer %>